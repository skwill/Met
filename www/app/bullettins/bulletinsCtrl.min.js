angular.module("ionic.metApp").config(function(e){}).run(function(e,t,n,i,o){}).controller("BulletinsCtrl",function(e,t,n,i,o,l,s,a,r,_,c,u,f,b,d){function m(e){var t=["January","February","March","April","May","June","July","Aug","September","October","November","December"],n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i=new Date(e);return n[i.getDay()+1]+" "+(i.getDate()+1)+"th of "+t[i.getMonth()]+" "+i.getFullYear()}var g=this,h=6e5;b(function(){d.clearCache().then(function(){console.log("- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -"),console.log("cache cleared"),u.reload(),g.refresh_all_b(),u.reload()}),d.clearHistory()},h),t.disableSwipe=function(){r.enableSlide(!1)},s.ready(function(){if(window.cordova){l.getDevice()}}),t.get_initial=function(){i(function(){t.slide(c.id)},1e3),console.log("get initial slide",c.id)},t.slideHasChanged=function(e){},g.refresh_all_b=function(){g.getGIBulletins(),g.get_serv_b(),g.get_flood_b(),g.get_sea_b()},g.getGIBulletins=function(){e.get_b_info(function(e){g.b_info=e.items[0],g.b_info.insertionDateFormatted=m(e.items[0].insertionDate),"0"==g.b_info.flag&&(g.b_info=null)})},g.get_serv_b=function(){e.get_b_serv(function(e){g.s_items=e.items[0],g.s_items.insertionDateFormatted=m(e.items[0].insertionDate),"0"==g.s_items.flag&&(g.s_items=null)})},g.get_flood_b=function(){e.get_b_flood(function(e){g.f_items=e.items[0],g.f_items.insertionDateFormatted=m(e.items[0].insertionDate),"0"==g.f_items.flag&&(g.f_items=null)})},g.get_sea_b=function(){e.get_b_sea(function(e){g.r_items=e.items[0],g.r_items.insertionDateFormatted=m(e.items[0].insertionDate),"0"==g.r_items.flag&&(g.r_items=null)})},o.fromTemplateUrl("app/bullettins/info_item.html",{scope:t,animation:"scale-in"}).then(function(e){t.b_details_modal=e}),t.b_info_close=function(){t.b_details_modal.hide()},t.b_info_open=function(n,i){switch(t.b_details_modal.show(),i){case"b":e.get_b_info(function(e){g.bulletin=e.items[0],console.log(g.bulletin)},n);break;case"s":e.get_b_serv(function(e){g.bulletin=e.items[0],console.log(g.bulletin)},n);break;case"f":e.get_b_flood(function(e){g.bulletin=e.items[0],console.log(g.bulletin)},n);break;case"r":e.get_b_sea(function(e){g.bulletin=e.items[0],console.log(g.bulletin)},n)}},t.slide=function(e){f.scrollTop(),r.slide(e),console.debug("slide to",e)}});