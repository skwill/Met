angular.module("ionic.metApp").controller("warningsCtrl",function(e,t,i,n,o,a,s,r,l,c,g,m){function _(e){var t=["January","February","March","April","May","June","July","Aug","September","October","November","December"],i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],n=new Date(e);return i[n.getDay()+1]+" "+(n.getDate()+1)+"th of "+t[n.getMonth()]+" "+n.getFullYear()}var u=this,w=6e5;m(function(){$ionicHistory.clearCache().then(function(){console.log("- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -"),console.log("cache cleared"),$route.reload(),u.refresh_all_w(),$route.reload()}),$ionicHistory.clearHistory()},w),i.disableSwipe=function(){c.enableSlide(!1)},i.slideHasChanged=function(e){u.update_slide(e)},u.update_slide=function(e){titles=["Watches","Warnings","Sigmet","Airmet"],i.sub_title=titles[e]},i.slide=function(e){g.scrollTop(),c.slide(e)},u.refresh_all_w=function(){u.get_o_air(),u.get_sigmet(),u.get_warn(),u.get_watch()},u.refreshData=function(e){switch(e){case"Watches":u.get_watch();break;case"Warnings":u.get_warn();break;case"Sigmet":u.get_sigmet();break;case"Airmet":u.get_o_air()}},u.get_o_air=function(){e.get_o_air(function(e){u.o_items=e.items[0],console.log("Air"),console.log(u.o_items),u.o_items.insertionDateFormatted=_(e.items[0].insertionDate),"1"==u.o_items.flag&&(u.o_items=null)})},u.get_sigmet=function(){e.get_sigmet(function(e){u.s_items=e.items[0],console.log("SIg"),console.log(u.s_items),u.s_items.insertionDateFormatted=_(e.items[0].insertionDate),"1"==u.s_items.flag&&(u.s_items=null)})},u.get_warn=function(){e.get_warn(function(e){u.w_items=e.items[0],console.log("Warning"),console.log(u.w_items),u.w_items.insertionDateFormatted=_(e.items[0].insertionDate),"1"==u.w_items.flag&&(u.w_items=null)})},u.get_watch=function(){e.get_watch(function(e){u.wt_items=e.items[0],console.log("Watch"),console.log(u.wt_items),u.wt_items.insertionDateFormatted=_(e.items[0].insertionDate),"1"==u.wt_items.flag&&(u.wt_items=null)})},a.fromTemplateUrl("app/warnings/info_item.html",{scope:i,animation:"slide-in-up"}).then(function(e){i.w_details_modal=e}),i.w_info_close=function(){var e=document.querySelector(".modal");e.setAttribute("style",""),i.w_details_modal.hide()},i.w_info_open=function(t,n){switch(i.w_details_modal.show(),n){case"o":e.get_o_air(function(e){u.warning=e.items[0],u.warning.warnType=u.warning.forecaster,console.log(u.warning)},t);break;case"s":e.get_sigmet(function(e){u.warning=e.items[0]},t);break;case"w":e.get_warn(function(e){u.warning=e.items[0]},t);break;case"wt":e.get_watch(function(e){u.warning=e.items[0],console.log(u.warning)},t)}},i.drag_close_modal=function(e){var t=window.innerHeight,n=e.gesture.center.pageY;console.log(e);var o=document.querySelector(".modal"),a="; transition: all cubic-bezier(0.1, 0.7, 0.1, 1) 400ms;";o.setAttribute("style","margin-top:"+n+"px"+a),n>t/2&&i.w_info_close(),0>n&&o.setAttribute("style","margin-top:0px"+a),n>t&&i.w_info_close()},i.drag_release=function(){var e=document.querySelector(".modal"),t="; transition: all cubic-bezier(0.1, 0.7, 0.1, 1) 400ms;";e.setAttribute("style","margin-top:0px"+t)}});