angular.module("ionic.metApp").controller("warningsCtrl",function(e,t,n,i,o,a,s,r,c,l,g,_){var m=this,u=6e5;_(function(){$ionicHistory.clearCache().then(function(){console.log("- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -"),console.log("cache cleared"),$route.reload(),m.refresh_all_w(),$route.reload()}),$ionicHistory.clearHistory()},u),n.disableSwipe=function(){l.enableSlide(!1)},n.slideHasChanged=function(e){m.update_slide(e)},m.update_slide=function(e){titles=["Watches","Warnings","Sigmet","Airmet"],n.sub_title=titles[e]},n.slide=function(e){g.scrollTop(),l.slide(e)},m.refresh_all_w=function(){m.get_o_air(),m.get_sigmet(),m.get_warn(),m.get_watch()},m.refreshData=function(e){switch(e){case"Watches":m.get_watch();break;case"Warnings":m.get_warn();break;case"Sigmet":m.get_sigmet();break;case"Airmet":m.get_o_air()}},m.get_o_air=function(){e.get_o_air(function(e){m.o_items=e.items[0],console.log("Air"),console.log(m.o_items)})},m.get_sigmet=function(){e.get_sigmet(function(e){m.s_items=e.items[0],console.log("SIg"),console.log(m.s_items)})},m.get_warn=function(){e.get_warn(function(e){m.w_items=e.items[0],console.log("Warning"),console.log(m.w_items)})},m.get_watch=function(){e.get_watch(function(e){m.wt_items=e.items[0],console.log("Watch"),console.log(m.wt_items)})},a.fromTemplateUrl("app/warnings/info_item.html",{scope:n,animation:"slide-in-up"}).then(function(e){n.w_details_modal=e}),n.w_info_close=function(){var e=document.querySelector(".modal");e.setAttribute("style",""),n.w_details_modal.hide()},n.w_info_open=function(t,i){switch(n.w_details_modal.show(),i){case"o":e.get_o_air(function(e){m.warning=e.items[0],m.warning.warnType=m.warning.forecaster,console.log(m.warning)},t);break;case"s":e.get_sigmet(function(e){m.warning=e.items[0]},t);break;case"w":e.get_warn(function(e){m.warning=e.items[0]},t);break;case"wt":e.get_watch(function(e){m.warning=e.items[0],console.log(m.warning)},t)}},n.drag_close_modal=function(e){var t=window.innerHeight,i=e.gesture.center.pageY;console.log(e);var o=document.querySelector(".modal"),a="; transition: all cubic-bezier(0.1, 0.7, 0.1, 1) 400ms;";o.setAttribute("style","margin-top:"+i+"px"+a),i>t/2&&n.w_info_close(),0>i&&o.setAttribute("style","margin-top:0px"+a),i>t&&n.w_info_close()},n.drag_release=function(){var e=document.querySelector(".modal"),t="; transition: all cubic-bezier(0.1, 0.7, 0.1, 1) 400ms;";e.setAttribute("style","margin-top:0px"+t)}});