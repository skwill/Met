angular.module("ionic.metApp").controller("ServicesCtrl",function(t,e,a,o,n,l,s,d,c,r){var g=this;a.disableSwipe=function(){r.enableSlide(!1)},g.refresh_all_a=function(){},g.get_o_aviation=function(){e.get_o_aviation(function(t){g.aviation_items=t.items})},g.get_aviation_radar=function(){},g.get_elninos=function(){e.get_elninos(function(t){g.el_infos=t,console.log("el nino"),console.log(t)})},g.get_rainandtemp=function(){e.get_rainandtemp(function(t){console.log("Rain and Temp "+t.items[0].year),g.rt=t.items})},g.get_drywet=function(){e.get_drywet(function(t){g.dw=t.items})},l.fromTemplateUrl("app/services/elrtinfo_item.html",{scope:a,animation:"scale-in"}).then(function(t){a.elrtinfo_modal=t}),a.closeModal=function(){a.elrtinfo_modal.hide()},a.cinfo_open=function(t,i){switch(i){case"el":e.get_elnino(function(t){console.log("el nino"),g.d_item=t.items[0],console.log(g.d_item)},t);break;case"rt":e.get_rainandtemp(function(t){console.log("rain and temp"),g.d_item=t.items[0],console.log(g.d_item)},t);break;case"dw":e.get_drywet(function(t){console.log("dry wetp"),g.d_item=t.items[0],console.log(g.d_item)},t)}a.elrtinfo_modal.show()},a.slideHasChanged_a=function(t){g.update_slide_a(t)},g.update_slide_a=function(t){titles=["Satellite","Radar","Weather Report","Forecast"],a.sub_title=titles[t]},a.slideHasChanged_c=function(t){g.update_slide_c(t)},g.update_slide_c=function(t){titles=["El Nino Update","Rainfall & Temp","Dry/Wet Outlook"],a.sub_title=titles[t]},a.slideHasChanged_m=function(t){g.update_slide_m(t)},g.update_slide_m=function(t){titles=[""],a.sub_title=titles[t]},a.slideHasChanged_t=function(t){g.update_slide_t(t)},g.update_slide_t=function(t){titles=["3-day Natinwide","3-day Tobago"],a.sub_title=titles[t]},a.slideHasChanged_ag=function(t){g.update_slide_ag(t)},g.update_slide_ag=function(t){titles=["Trinidad","Tobago"],a.sub_title=titles[t]},a.slide=function(t){r.slide(t)},g.radars_150=function(){g.radars_150_list=t.all_of_cat(150),console.log("radars 150",g.radars_150_list)},g.radars_250=function(){g.radars_250_list=t.all_of_cat(250),console.log("radars 250",g.radars_250_list)},g.get_radar_400=function(){alert()},g.get_metars=function(){e.get_metar(function(t){var e=t.items,a=[{id:1,icon:"icon ion-ios-location-outline",el:"met-loc",show:!0},{id:2,icon:"icon ion-thermometer",el:null,show:!1},{id:3,icon:"icon ion-thermometer",el:"temp",show:!0},{id:4,icon:"icon ion-waterdrop",el:"dew",show:!0},{id:5,icon:"icon ion-ios-speedometer-outline",el:"pressure",show:!0},{id:6,icon:"icon ion-ios-analytics-outline",el:"winds",show:!0},{id:7,icon:"icon",el:"weather",show:!1},{id:8,el:"weather",show:!1},{id:9,icon:"icon ion-ios-cloudy-outline",el:"clouds",show:!0},{id:10,icon:"icon ion-umbrella",el:"weather",show:!1}];for(g.mdata=[],i=0;i<e.length;i++)"TTPP"==e[i].station&&g.mdata.push({id:e[i].id,label:e[i].label,station:e[i].station,value:e[i].value,icon:a[i].icon,el:a[i].el,show:a[i].show})}),g.sigmet()},g.sigmet=function(){e.get_sigmet(function(t){g.sig=t.items,console.debug("sigmet",g.sig)})}}).controller("RadarDetailCtrl",function(t,e,i,a,o,n,l,s,d,c){var r=this;t.close_loading=function(){d.hide()},t.get_radar_detail=function(){console.log("here"),r.radar=a.get(e.id),i.get_radar(function(t){var e=new Image;e.src=t.image_src,e.style.maxWidth="100%";var i=$(".img_holder");i.html(e),i.find("img").wrap('<a href="'+t.image_src+'" class="swipebox" title="'+r.radar.title+'"></a>'),console.log("radar image",t)},e.id),r.radar=a.get(e.id),console.debug("radar item detail",a.get(e.id))},t.reload_page=function(){t.get_radar_detail(e.id),console.log(e.id)},t.$on("loading:show",function(){d.show({template:' <ion-spinner></ion-spinner><br><button class="button button-light button-block" ng-click="close_loading()">Cancel</button>',scope:t})})}).factory("Radars",function(){var t=[{id:0,img:" ",title:"Radar Loop",sub:"Loops all radar scans.",cat:null},{id:1,img:"http://190.58.130.190/web/aviation/RadarPages2014/150km/eht7.png",title:"EHT (Echo Height Top)",sub:"Gives a representation of the height to which the top of the clouds extend.",cat:150},{id:2,img:"http://190.58.130.190/web/aviation/RadarPages2014/150km/hwind7.png",title:"HWIND (Horizontal Wind)",sub:"Shows wind flow at a specific altitude.",cat:150},{id:3,img:"http://190.58.130.190/web/aviation/RadarPages2014/150km/max7.png",title:"MAX (Maximum)",sub:"Shows a 2 Dimensional (2D) flow for the horizontal and vertical profile of the clouds.",cat:150},{id:4,img:" ",title:"PAC",sub:"No Subtitle",cat:150},{id:5,img:"http://190.58.130.190/web/aviation/RadarPages2014/150km/ppi7.png",title:"PPI (Plan Position Indicator)",sub:"A representation of the cloud echoes in a horizontal plane.",cat:150},{id:6,img:"http://190.58.130.190/web/aviation/RadarPages2014/150km/sri7.png",title:"SRI (Surface Rainfall Intensity)",sub:"An estimate of rainfall intensity associated with different echoes.",cat:150},{id:7,img:"http://190.58.130.190/web/aviation/RadarPages2014/150km/vvp7.png",title:"VVP (Velocity Volume Processing)",sub:"Provides an estimate of the wind profile up to a certain height.",cat:150},{id:8,img:"http://190.58.130.190/web/aviation/RadarPages2014/200km/eht1.png",title:"ETH(Height)",sub:"Gives a representation of the height to which the top of the clouds extend.",cat:250},{id:9,img:"",title:"",sub:"",cat:0},{id:10,img:"http://190.58.130.190/web/aviation/RadarPages2014/200km/hwind7.png",title:"HWIND (Horizontal Wind)",sub:"Shows wind flow at a specific altitude.",cat:250},{id:11,img:"http://190.58.130.190/web/aviation/RadarPages2014/200km/max7.png",title:"MAX (Maximum)",sub:"Shows a 2 Dimensional (2D) flow for the horizontal and vertical profile of the clouds.",cat:250},{id:12,img:"http://190.58.130.190/web/aviation/RadarPages2014/200km/ppi7.png",title:"PPI (Plan Position Indicator)",sub:"A representation of the cloud echoes in a horizontal plane.",cat:250},{id:13,img:"http://190.58.130.190/web/aviation/RadarPages2014/200km/sri7.png",title:"SRI (Surface Rainfall Intensity)",sub:"An estimate of rainfall intensity associated with different echoes.",cat:250},{id:14,img:"http://190.58.130.190/web/aviation/RadarPages2014/200km/vvp7.png",title:"VVP (Velocity Volume Processing)",sub:"Provides an estimate of the wind profile up to a certain height.",cat:250},{id:15,img:"http://190.58.130.190/web/aviation/RadarPages2014/400km/400ppi7.png",title:"PPI (Plan Position Indicator)",sub:"A representation of the cloud echoes in a horizontal plane.",cat:400}];return{all_of_cat:function(e){for(var i=[],a=0;a<t.length;a++)t[a].cat===parseInt(e)&&i.push(t[a]);return i},get:function(e){for(var i=0;i<t.length;i++)if(t[i].id===parseInt(e))return t[i];return null}}}).controller("AWSCtrl",function(t,e,a,o,n,l,s,d,c){var r=this,g=[{city:"Guyaguayare",desc:"Guyaguayare AWS",lat:10.84584,"long":-60.594896},{city:"El Reposo",desc:"El Reposo AWS",lat:10.35426,"long":-61.71008},{city:"Centeno",desc:"Centeno AWS",lat:10.352226,"long":-61.192286},{city:"Brasso Venado",desc:"Brasso Venado AWS",lat:10.252784,"long":-61.17798},{city:"Waterloo",desc:"Waterloo AWS",lat:10.28492,"long":-61.28408},{city:"Penal",desc:"Penal AWS",lat:10.103324,"long":-61.27252},{city:"Chatham ",desc:"Chatham  AWS",lat:10.8702,"long":-61.431278},{city:"Piarco  (BASE)",desc:"Piarco  (BASE) AWS",lat:10.352436,"long":-61.204158},{city:"SYNOPAWS",desc:"SYNOPAWS AWS",lat:10.352,"long":-61.20403},{city:"San Salvador",desc:"San Salvador AWS",lat:10.22588,"long":-61.223143},{city:"IMA Chaguaramas",desc:"IMA Chaguaramas AWS",lat:10.41121,"long":-61.3715},{city:"UTT (Camden)",desc:"UTT (Camden) AWS",lat:10.25384,"long":-61.26425}];e.initialise=function(){var t=new google.maps.LatLng(10.84584,-60.594896),a={center:t,zoom:8,mapTypeId:google.maps.MapTypeId.ROADMAP},o=new google.maps.Map(document.getElementById("map"),a);e.map=o,navigator.geolocation.getCurrentPosition(function(t){o.setCenter(new google.maps.LatLng(t.coords.latitude,t.coords.longitude))}),e.markers=[];var n=function(t){var i=new google.maps.InfoWindow,a=new google.maps.Marker({position:new google.maps.LatLng(t.lat,t["long"]),map:e.map,animation:google.maps.Animation.DROP,title:t.city});a.content='<div class="infoWindowContent">'+t.desc+"</div>",i.setContent("<h2>"+a.title+"</h2>"+a.content),e.markers.push(a)};for(i=0;i<g.length;i++)n(g[i])},r.aws_click=function(t){$(".gm-style-iw").each(function(e,i){$(this).find(".infoWindowContent").html(t)})},google.maps.event.addDomListener(document.getElementById("map"),"load",e.initialise())}).run(function(t,e,i,a,o){});