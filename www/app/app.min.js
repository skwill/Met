angular.module("ionic.metApp",["ionic","ionic.service.core","ionic.metApp.services","ionic.metApp.directives","ngCordova","ngResource","ngIOS9UIWebViewPatch","ionic.ion.imageCacheFactory","ngRoute"]).constant("FORECASTIO_KEY","4cd3c5673825a361eb5ce108103ee84a").constant("FLICKR_API_KEY","504fd7414f6275eb5b657ddbfba80a2c").config(["$stateProvider","$urlRouterProvider","$ionicConfigProvider","$httpProvider",function(e,t,a,o){o.interceptors.push(function(e){return{request:function(t){return e.$broadcast("loading:show"),t},response:function(t){return e.$broadcast("loading:hide"),t}}}),a.tabs.position("bottom"),ionic.Platform.isAndroid()&&a.scrolling.jsScrolling(!1),e.state("app",{"abstract":!0,url:"/app",templateUrl:"app/layout/menu-layout.html"}).state("app.home",{url:"/home",views:{mainContent:{templateUrl:"app/home/home.html"}}}).state("app.bago",{url:"/home/bago",views:{mainContent:{templateUrl:"app/home/bago.html"}}}).state("app.bullettins",{url:"/bullettins/:id",cache:!1,views:{mainContent:{templateUrl:"app/bullettins/bullettins.html"}}}).state("app.warnings",{url:"/warnings/:id",cache:!1,views:{mainContent:{templateUrl:"app/warnings/warnings.html"}}}).state("app.about",{url:"/about",views:{mainContent:{templateUrl:"app/about/about.html"}}}).state("app.services",{url:"/services",views:{mainContent:{templateUrl:"app/services/services.html"}}}).state("app.services.home",{url:"/services/home",views:{servicesContent:{templateUrl:"app/services/service_main.html"}}}).state("app.services.radars",{url:"/radars",views:{servicesContent:{templateUrl:"app/services/aviation.html"}}}).state("app.services.radar_loop",{url:"/radar_loop",views:{servicesContent:{templateUrl:"app/services/radar/radar_loop.html"}}}).state("app.services.radar_150",{url:"/radar_150",views:{servicesContent:{templateUrl:"app/services/radar/radar_150.html"}}}).state("app.services.radar-detail",{url:"/radar_detail/:id",views:{servicesContent:{templateUrl:"app/services/radar/radar-detail.html",controller:"RadarDetailCtrl as rdc"}}}).state("app.services.radar_250",{url:"/radar_250",views:{servicesContent:{templateUrl:"app/services/radar/radar_250.html"}}}).state("app.services.radar_400",{url:"/radar_400",views:{servicesContent:{templateUrl:"app/services/radar/radar_400.html"}}}).state("app.services.climate",{url:"/climate",views:{servicesContent:{templateUrl:"app/services/climate.html"}}}).state("app.forecast",{url:"/forecast",views:{mainContent:{templateUrl:"app/forecast/forecast.html"}}}).state("app.forecast_home",{url:"/forecast_home",views:{mainContent:{templateUrl:"app/forecast/forecast-home.html"}}}).state("app.metars_trin",{url:"/metars",views:{mainContent:{templateUrl:"app/home/metars-trin.html"}}}).state("app.metars_bago",{url:"/metars",views:{mainContent:{templateUrl:"app/home/metars-bago.html"}}}).state("app.uv_index",{url:"/home/uv_index",views:{mainContent:{templateUrl:"app/home/uv_index.html"}}}).state("app.bulletinsev",{url:"/bulletinsev",views:{mainContent:{templateUrl:"app/bullettins/severe.html"}}}).state("app.services.marine",{url:"/marine",views:{servicesContent:{templateUrl:"app/services/marine.html"}}}).state("app.services.winds",{url:"/winds",views:{servicesContent:{templateUrl:"app/services/winds.html"}}}).state("app.services.aws",{url:"/aws",views:{servicesContent:{templateUrl:"app/services/aws.html"}}}).state("app.services.agriculture",{url:"/agriculture",views:{servicesContent:{templateUrl:"app/services/agriculture.html"}}}).state("app.contact",{url:"/contact",views:{mainContent:{templateUrl:"app/contact.html"}}}),t.otherwise("/app/home")}]).run(["$http","$cordovaPush","$ionicPlatform","$rootScope","$ionicLoading","$ImageCacheFactory","$cordovaDialogs","$state","metApi","$timeout",function(e,t,a,o,r,i,s,n,l,c){function p(e){console.log("android"),s.confirm(e.text,e.title).then(function(t){var a=t;if(console.log("button",a),1==a){var o=0;console.debug("NOTIFICATION!!!",e),("Information"==e.payload.slide||"WATCH"==e.payload.slide)&&(o=0),("Severe Weather"==e.payload.slide||"WARNING"==e.payload.slide)&&(o=1),"Flood"==e.payload.slide&&(o=2),"Rough Sea"==e.payload.slide&&(o=3),n.go("app."+e.payload.state,{id:o}),console.debug("state",e.payload.state,o)}})}i.Cache(["http://farm1.static.flickr.com/644/23688702732_26414ac119_z.jpg","http://farm6.static.flickr.com/5780/23714706741_972799109b_z.jpg","http://farm6.static.flickr.com/5770/23408797994_05f0932a8d_z.jpg","http://farm6.static.flickr.com/5827/23410243873_3e22a903d1_z.jpg"]).then(function(){console.log("all images loaded")},function(e){console.log("error loading images")}),o.$on("loading:show",function(){r.show({template:' <ion-spinner class="light"></ion-spinner>'})}),o.$on("loading:hide",function(){r.hide()}),a.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),window.StatusBar&&StatusBar.styleLightContent()}),a.ready(function(){Ionic.io();var e=new Ionic.Push({canShowAlert:!1,canSetBadge:!0,canPlaySound:!0,canRunActionsOnWake:!0,onNotification:function(e){console.log("notification",e),ionic.Platform.isAndroid()&&p(e),console.debug("platform",ionic.Platform.device())},pluginConfig:{android:{iconColor:"#0000FF"}}}),t=Ionic.User.current();t.id||(t.id=Ionic.User.anonymousId()),t.set("name",ionic.Platform.device().model),console.log("device name",ionic.Platform.device()),t.set("bio",ionic.Platform.device().manufacturer+", "+ionic.Platform.device().platform+", "+ionic.Platform.device().uuid+", "+ionic.Platform.device().version),t.save(),console.log("user",t);var a=function(a){e.addTokenToUser(t),console.log("token",a),void 0!=a.token&&l.subscribe_token(function(e){console.debug("met subscribe response",e)},a.token),o.token=a.token,t.save()};e.register(a),l.get_tokens(function(e){console.debug("all device tokens",e)})})}]);