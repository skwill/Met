!function(){function r(r,n){for(var e in n)r[e]=r[e]||n[e]}function n(r,n){return"function"==typeof r?r:n}function e(r,n){return angular.element(n('<div style="{{circleContainerStyle}}"><div round-progress  max="max"  current="progress"  color="{{color}}" bgcolor="{{bgcolor}}"  radius="{{radius}}"  stroke="{{stroke}}"  rounded="rounded" clockwise="clockwise" iterations="{{iterations}}"  animation="{{animation}}"></div></div>')(r))}var c={color:"#1D5ECE",bgcolor:"#eaeaea",semi:!1,rounded:!1,clockwise:!0,radius:"15",stroke:"5",max:100,iterations:50,animation:"easeOutCubic",interval:200,showProgressCircleInBrowser:!0,showProgressCircleInDevice:!0,circleContainerStyle:"text-align:center"},o=function(r,n,e,c){r.progress=c.progress},i=function(n,o,i,a){function t(){s=e(n,i),a.display=o.css("display"),o.css("display","none"),o.after(s)}if("background"==n.srcIs)o[0].style.background=n.backgroundLoadingStyle;else{r(n,c);var s;window.cordova?n.showProgressCircleInDevice&&t():n.showProgressCircleInBrowser&&t(),a.progress_circle=s}},a=function(r,n,e,c){function o(){n.css("display",c.display),c.progress_circle.remove()}"background"!=r.srcIs&&(window.cordova?r.showProgressCircleInDevice&&o():r.showProgressCircleInBrowser&&o())},t={interval:200,backgroundStyle:"",backgroundLoadingStyle:"url('lib/ionic-cache-src/img/loader.gif') no-repeat center",uiOnStart:i,uiOnFinish:a,uiOnProgress:o,expire:1/0};angular.module("ionic-cache-src",["ionic","angular-svg-round-progress","ngCordova","ngStorage"]).provider("$cacheSrc",function(){this.config=t,this.set=function(r,n){var e=typeof r;return"object"==e?angular.extend(this.config,r):"string"==e&&(this.config[r]=n),this},this.$get=function(){return this.config}}).factory("cacheSrcStorage",function(r){var n={};return n._cache=r.cache_src,n.get=function(r){return n._cache[r]&&getCacheDir()+n._cache[r]},n.set=function(r,e){return n._cache[r]=e,n},n}).directive("cacheSrc",function(e,c,o,i,a,t,s,u){return{restrict:"A",scope:{onProgress:"=?",onFinish:"=?",onError:"=?",onStart:"=?",uiOnStart:"=?",uiOnProgress:"=?",uiOnFinish:"=?"},link:function(i,g,l){function h(){for(var r="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=0;16>e;e++)r+=n.charAt(Math.floor(Math.random()*n.length));return r}function f(r,n){for(var e=0;e<n.length;e++){var c=n[e];if(0===r.indexOf(c))return!0}return!1}function d(r){return f(r,["http://","https://","ftp://"])?!0:!1}function p(r){"background"==i.srcIs?g[0].style.background="url('"+r+"') "+i.backgroundStyle:g[0][i.srcIs||"src"]=r}function S(r){p(r),i.onFinish(r)}function v(){switch(device.platform){case"iOS":return c.cordova.file.documentsDirectory;case"Android":return c.cordova.file.dataDirectory;case"windows":return c.cordova.file.dataDirectory}return""}function w(){var r="."+l.cacheSrc.split(".").pop(),n=h()+r;s.download(l.cacheSrc,v()+n,{},!0).then(function(){P[l.cacheSrc]=n,i.expire!==1/0&&(k[l.cacheSrc]=Date.now()),S(v()+n)},i.onError,angular.noop)}function y(){var r={};i.onStart(l.cacheSrc),i.uiOnStart(i,g,a,r);var n="."+l.cacheSrc.split(".").pop(),e=h()+n;s.download(l.cacheSrc,v()+e,{},!0).then(function(){P[l.cacheSrc]=e,i.expire!==1/0&&(k[l.cacheSrc]=Date.now()),i.uiOnFinish(i,g,a,r),S(v()+e)},i.onError,function(n){r.progress=n.loaded/n.total*100,i.uiOnProgress(i,g,a,r),i.onProgress(r.progress)})}function O(){S(v()+P[l.cacheSrc])}r(i,t);for(var b in l)angular.isFunction(i[b])||(i[b]=l[b]);if(i.expire=parseInt(i.expire)||t.expire,i.onProgress=n(i.onProgress,angular.noop),i.onFinish=n(i.onFinish,angular.noop),i.onError=n(i.onError,angular.noop),i.onStart=n(i.onStart,angular.noop),i.uiOnProgress=n(i.uiOnProgress,angular.noop),i.uiOnFinish=n(i.uiOnFinish,angular.noop),i.uiOnStart=n(i.uiOnStart,angular.noop),c.cordova){var P=u.cache_src=u.cache_src||{},k=u.cache_src_create_time=u.cache_src_create_time||{};e.ready().then(function(){l.$observe("cacheSrc",function(){if(l.cacheSrc)if(d(l.cacheSrc))if(P[l.cacheSrc]){var r=Date.now(),n=k[l.cacheSrc]||1/0;r-n<1e3*i.expire?O():(p(v()+P[l.cacheSrc]),w())}else y();else S(l.cacheSrc)})})}else l.$observe("cacheSrc",function(){if(l.cacheSrc)if(d(l.cacheSrc)){var r={};i.onStart(l.cacheSrc),i.uiOnStart(i,g,a,r),r.progress=i.progress||0;var n=o(function(){r.progress+=10,i.uiOnProgress(i,g,a,r),i.onProgress(r.progress),100==r.progress&&(o.cancel(n),i.uiOnFinish(i,g,a,r),S(l.cacheSrc))},i.interval)}else S(l.cacheSrc)})}}})}();