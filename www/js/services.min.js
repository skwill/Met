var forecastioWeather=["$q","$resource","$http","FORECASTIO_KEY",function(e,t,o,n){{var r="https://api.forecast.io/forecast/"+n+"/";t(r,{callback:"JSON_CALLBACK"},{get:{method:"JSONP"}})}return{getAtLocation:function(e,t){return o.jsonp(r+e+","+t+"?callback=JSON_CALLBACK")},getForecast:function(e){},getHourly:function(e){}}}];angular.module("ionic.metApp.services",["ngResource"]).constant("DEFAULT_SETTINGS",{tempUnits:"c"}).factory("Settings",function(e,t){var o={};try{o=JSON.parse(window.localStorage.settings)}catch(n){}o=angular.extend({},t,o),o||(window.localStorage.settings=JSON.stringify(o));var r={getSettings:function(){return o},save:function(){window.localStorage.settings=JSON.stringify(o),e.$broadcast("settings.changed",o)},get:function(e){return o[e]},set:function(e,t){o[e]=t,this.save()},getTempUnits:function(){return o.tempUnits}};return r.save(),r}).factory("Geo",function(e){return{reverseGeocode:function(t,o){var n=e.defer(),r=new google.maps.Geocoder;return r.geocode({latLng:new google.maps.LatLng(t,o)},function(e,t){if(t==google.maps.GeocoderStatus.OK){if(e.length>1){for(var o,r,a=e[1],s=[],c=!1,i=!1,g=0;g<a.address_components.length;g++){o=a.address_components[g],r=o.types;for(var f=0;f<r.length;f++)c||"locality"!=r[f]||(c=!0,s.push(o.long_name)),i||"administrative_area_level_1"!=r[f]||(i=!0,s.push(o.short_name))}n.resolve(s.join(", "))}}else console.log("reverse fail",e,t),n.reject(e)}),n.promise},getLocation:function(){var t=e.defer();return navigator.geolocation.getCurrentPosition(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}}).factory("Flickr",function(e,t,o){var n="https://api.flickr.com/services/rest/",r=t(n,{method:"flickr.photos.search",safe_search:1,jsoncallback:"JSON_CALLBACK",api_key:o,format:"json"},{get:{method:"JSONP"}});return{search:function(t,o,n){var a=e.defer();return console.log("Searching flickr for tags",t),r.get({tags:t,lat:o,lng:n},function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise}}}).factory("Weather",forecastioWeather);